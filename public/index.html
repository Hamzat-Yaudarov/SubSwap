<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SubSwap - –í–∑–∞–∏–º–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-page="home">
                <span class="nav-icon">üè†</span>
                <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
            </button>
            <button class="nav-item" data-page="mutuals">
                <span class="nav-icon">ü§ù</span>
                <span class="nav-label">–í–∑–∞–∏–º–∫–∏</span>
            </button>
            <button class="nav-item" data-page="chat">
                <span class="nav-icon">üí¨</span>
                <span class="nav-label">–ß–∞—Ç</span>
            </button>
            <button class="nav-item" data-page="channels">
                <span class="nav-icon">üì¢</span>
                <span class="nav-label">–ú–æ–∏ –∫–∞–Ω–∞–ª—ã</span>
            </button>
            <button class="nav-item" data-page="profile">
                <span class="nav-icon">üë§</span>
                <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
            </button>
        </nav>

        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <div id="page-home" class="page active">
            <div class="container">
                <h1 class="page-title">–ì–ª–∞–≤–Ω–∞—è</h1>
                
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="card stats-card">
                    <h2>–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å</h2>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="stat-subscribers">‚Äî</div>
                            <div class="stat-label">–ü–æ–ª—É—á–µ–Ω–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="stat-active">‚Äî</div>
                            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –≤–∑–∞–∏–º–æ–∫</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="stat-rating">‚Äî</div>
                            <div class="stat-label">‚≠ê –†–µ–π—Ç–∏–Ω–≥</div>
                        </div>
                    </div>
                </div>

                <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
                <div class="card actions-card">
                    <button class="btn btn-primary btn-large" onclick="app.showPage('mutuals')">
                        –ù–∞–π—Ç–∏ –≤–∑–∞–∏–º–∫—É
                    </button>
                    <button class="btn btn-outline btn-large" onclick="app.showPage('channels')">
                        –î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª
                    </button>
                </div>

                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫ -->
                <div class="card info-card">
                    <h2>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h2>
                    <div class="steps">
                        <div class="step">
                            <div class="step-icon">1Ô∏è‚É£</div>
                            <div class="step-text">–î–æ–±–∞–≤—å –∫–∞–Ω–∞–ª</div>
                        </div>
                        <div class="step">
                            <div class="step-icon">2Ô∏è‚É£</div>
                            <div class="step-text">–ù–∞–π–¥–∏ –≤–∑–∞–∏–º–∫—É</div>
                        </div>
                        <div class="step">
                            <div class="step-icon">3Ô∏è‚É£</div>
                            <div class="step-text">–ü–æ–ª—É—á–∞–π —Ä–æ—Å—Ç –±–µ–∑ –±–∞–Ω–æ–≤</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–∑–∞–∏–º–æ–∫ -->
        <div id="page-mutuals" class="page">
            <div class="container">
                <h1 class="page-title">–í–∑–∞–∏–º–∫–∏</h1>
                
                <div class="tabs">
                    <button class="tab active" data-type="subscribe">–ü–æ–¥–ø–∏—Å–∫–∏</button>
                    <button class="tab" data-type="reaction">–†–µ–∞–∫—Ü–∏–∏</button>
                </div>

                <div id="mutuals-list" class="mutuals-list">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —á–∞—Ç–∞ -->
        <div id="page-chat" class="page">
            <div class="container">
                <h1 class="page-title">–ß–∞—Ç—ã</h1>
                
                <div id="chats-list" class="chats-list">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —á–∞—Ç–∞ -->
        <div id="page-chat-view" class="page">
            <div class="container chat-container">
                <div class="chat-header">
                    <button class="btn-back" onclick="app.showPage('chat')">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2 id="chat-title">–ß–∞—Ç</h2>
                </div>
                
                <div id="chat-messages" class="chat-messages">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
                
                <div id="chat-complete-section" class="chat-complete-section" style="display: none;">
                    <button class="btn btn-success" onclick="app.completeChat()">‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ</button>
                </div>
                
                <div class="chat-input-container">
                    <input type="text" id="chat-input" class="chat-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." onkeypress="if(event.key==='Enter') app.sendMessage()">
                    <button class="btn btn-primary" onclick="app.sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞–Ω–∞–ª–æ–≤ -->
        <div id="page-channels" class="page">
            <div class="container">
                <h1 class="page-title">–ú–æ–∏ –∫–∞–Ω–∞–ª—ã</h1>
                
                <div id="channels-list" class="channels-list">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>

                <button class="btn btn-primary btn-large" onclick="app.showAddChannel()">
                    ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª
                </button>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="page-profile" class="page">
            <div class="container">
                <h1 class="page-title">–ü—Ä–æ—Ñ–∏–ª—å</h1>
                
                <div class="card">
                    <div class="profile-info">
                        <div class="profile-item">
                            <span class="profile-label">Telegram ID</span>
                            <span class="profile-value" id="profile-id">‚Äî</span>
                        </div>
                        <div class="profile-item">
                            <span class="profile-label">–†–µ–π—Ç–∏–Ω–≥</span>
                            <span class="profile-value" id="profile-rating">‚Äî</span>
                        </div>
                        <div class="profile-item">
                            <span class="profile-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –≤–∑–∞–∏–º–æ–∫</span>
                            <span class="profile-value" id="profile-completed">‚Äî</span>
                        </div>
                        <div class="profile-item">
                            <span class="profile-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –≤–∑–∞–∏–º–æ–∫</span>
                            <span class="profile-value" id="profile-active">‚Äî</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="modal-overlay" class="modal-overlay" onclick="app.closeModal()"></div>
    
    <!-- –ú–æ–¥–∞–ª–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞ -->
    <div id="modal-add-channel" class="modal">
        <div class="modal-content">
            <h2>–î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª</h2>
            <input type="text" id="channel-link" class="input" placeholder="https://t.me/...">
            <div class="radio-group">
                <label class="radio">
                    <input type="radio" name="channel-type" value="channel" checked>
                    <span>–ö–∞–Ω–∞–ª</span>
                </label>
                <label class="radio">
                    <input type="radio" name="channel-type" value="chat">
                    <span>–ß–∞—Ç</span>
                </label>
            </div>
            <div id="channel-error" class="error-message"></div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="app.closeModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="app.addChannel()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞ –≤ —á–∞—Ç–µ -->
    <div id="modal-create-post" class="modal">
        <div class="modal-content">
            <h2>–°–æ–∑–¥–∞—Ç—å –∑–∞–ø—Ä–æ—Å</h2>
            <select id="post-channel" class="input">
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–Ω–∞–ª</option>
            </select>
            <select id="post-type" class="input">
                <option value="channel">–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª</option>
                <option value="chat">–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —á–∞—Ç</option>
                <option value="reaction">–†–µ–∞–∫—Ü–∏–∏</option>
            </select>
            <select id="post-conditions" class="input">
                <option value="–¥–æ 300">–¥–æ 300</option>
                <option value="300‚Äì1000">300‚Äì1000</option>
                <option value="–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π">–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π</option>
            </select>
            <div id="post-error" class="error-message"></div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="app.closeModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="app.createPost()">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ —É—á–∞—Å—Ç–∏—è –≤–æ –≤–∑–∞–∏–º–∫–µ -->
    <div id="modal-join-mutual" class="modal">
        <div class="modal-content">
            <h2 id="join-mutual-title">–£—á–∞—Å—Ç–∏–µ –≤–æ –≤–∑–∞–∏–º–∫–µ</h2>
            <div id="join-mutual-info"></div>
            <div id="join-mutual-error" class="error-message"></div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="app.closeModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="app.startChatForMutual()">–ù–∞—á–∞—Ç—å —á–∞—Ç</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div id="modal-user" class="modal">
        <div class="modal-content">
            <div class="user-modal-header">
                <img id="user-modal-avatar" class="user-modal-avatar" src="" alt="Avatar" onerror="this.style.display='none'">
                <div id="user-modal-name" class="user-modal-name"></div>
                <div id="user-modal-username" class="user-modal-username"></div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary" onclick="app.openChatWithUser()">–ù–∞–ø–∏—Å–∞—Ç—å –≤ –õ–° –≤ MiniApp</button>
                <button class="btn btn-outline" onclick="app.openTelegramChat()">–ù–∞–ø–∏—Å–∞—Ç—å –≤ –õ–° –≤ Telegram</button>
                <button class="btn btn-secondary" onclick="app.closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

